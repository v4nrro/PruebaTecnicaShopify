{% render 'newsletter-button', onclick: 'showFormNews(this)' %}

<div class="newsletter-wrapper">

  <form id="form_newsletter" name="form_newsletter" action="" novalidate="novalidate" class="hide-form">
    <div class="caja-input-news bloque-input">
      <input
        type="email"
        class="input-news"
        name="email"
        id="email_newsletter"
        placeholder="Escribe tu e-mail aquí"
        autocomplete="off"
      >
      <label for="email_newsletter" class="error" style="display: none;">El e-mail es obligatorio.</label>
      <input type="submit" name="suscribe_newsletter" class="button-news" value="Enviar">
    </div>

    <div class="legal-info">
      UNISA se hace responsable del tratamiento de tus datos, con la finalidad de atender tu solicitud de registro como
      cliente y gestionar los pedidos que realices y remitirte comunicaciones comerciales únicamente en el caso de que
      marques la casilla a tal fin. Tienes los derechos de acceso, rectificación, supresión, limitación, oposición al
      tratamiento y portabilidad de tus datos personales. Puedes ejercitar tus derechos en
      <a href="mailto:protecciondatos@unisa-europa.com">protecciondatos@unisa-europa.com</a>. +info en nuestra
      <a href="https://www.unisa-europa.com/es-ES/privacidad/" target="_blank">Política de privacidad</a><br>
    </div>

    <div class="bloque-input caja-checkbox">
      <input class="css-checkbox" type="checkbox" name="news_newsletter" id="news_newsletter">
      <label for="news_newsletter" class="css-label"> Acepto recibir ofertas y novedades por e-mail </label>
    </div>

    <div class="result-news"></div>
  </form>
</div>

<script>
function showFormNews(button) {
  const wrapper = button.closest('.newsletter-wrapper');
  const form = wrapper.querySelector('#form_newsletter');
  const newsletterButton = document.querySelector('.newsletter-button');

  // Hide button and show form
  newsletterButton.style.display = 'none';
  form.classList.remove('hide-form');
  form.classList.add('show-form');
}
</script>

{% stylesheet %}
  .hide-form {
  display: none;
}
.show-form {
  display: block;
}
{% endstylesheet %}

{% schema %}
{
  "name": "Newsletter Button",
  "tag": null,
  "settings": [
    {
      "type": "text",
      "id": "label",
      "label": "t:settings.label",
      "default": "t:text_defaults.button_label"
    },
    {
      "type": "checkbox",
      "id": "open_in_new_tab",
      "label": "t:settings.open_new_tab",
      "default": false
    },
    {
      "type": "select",
      "id": "style_class",
      "label": "t:settings.style",
      "options": [
        {
          "value": "button",
          "label": "t:options.primary"
        },
        {
          "value": "button-secondary",
          "label": "t:options.secondary"
        },
      ],
      "default": "button"
    },
    {
      "type": "header",
      "content": "t:content.size"
    },
    {
      "type": "select",
      "id": "width",
      "label": "t:settings.width_desktop",
      "options": [
        {
          "value": "fit-content",
          "label": "t:options.fit_content"
        },
        {
          "value": "custom",
          "label": "t:options.custom"
        }
      ],
      "default": "fit-content"
    },
    {
      "type": "range",
      "id": "custom_width",
      "label": "t:settings.custom_width",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "default": 100,
      "visible_if": "{{ block.settings.width == \"custom\" }}"
    },
    {
      "type": "select",
      "id": "width_mobile",
      "label": "t:settings.width_mobile",
      "options": [
        {
          "value": "fit-content",
          "label": "t:options.fit_content"
        },
        {
          "value": "custom",
          "label": "t:options.custom"
        }
      ],
      "default": "fit-content"
    },
    {
      "type": "range",
      "id": "custom_width_mobile",
      "label": "t:settings.custom_width",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "default": 100,
      "visible_if": "{{ block.settings.width_mobile == \"custom\" }}"
    }
  ],
  "presets": [
    {
      "name": "Newsletter Button",
      "category": "t:categories.basic"
    }
  ]
}
{% endschema %}
