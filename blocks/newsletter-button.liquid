
<div class="newsletter-wrapper">
  {% render 'newsletter-button', onclick: 'showFormNews(this)' %}

  <form id="form_newsletter" name="form_newsletter" action="" novalidate="novalidate" class="hide-form">
    <div class="caja-input-news bloque-input">
      <input
        type="email"
        class="input-news"
        name="email"
        id="email_newsletter"
        placeholder="Escribe tu e-mail aquí"
        autocomplete="off"
      >
        <input type="submit" name="suscribe_newsletter" class="button-news" value="Enviar">
      </div>
      <small class="error">El e-mail es obligatorio.</small>
      <br>

    <small class="legal-info">
      UNISA se hace responsable del tratamiento de tus datos, con la finalidad de atender tu solicitud de registro como
      cliente y gestionar los pedidos que realices y remitirte comunicaciones comerciales únicamente en el caso de que
      marques la casilla a tal fin. Tienes los derechos de acceso, rectificación, supresión, limitación, oposición al
      tratamiento y portabilidad de tus datos personales. Puedes ejercitar tus derechos en
      <a href="mailto:protecciondatos@unisa-europa.com">protecciondatos@unisa-europa.com</a>. +info en nuestra
      <a href="https://www.unisa-europa.com/es-ES/privacidad/" target="_blank">Política de privacidad</a><br>
    </small>

    <div class="bloque-input caja-checkbox">
      <input class="css-checkbox" type="checkbox" name="news_newsletter" id="news_newsletter">
      <label for="news_newsletter" class="css-label"> Acepto recibir ofertas y novedades por e-mail </label>
    </div>

    <div class="result-news"></div>
  </form>
</div>

<script>
function showFormNews(button) {
  const wrapper = button.closest('.newsletter-wrapper');
  const form = wrapper.querySelector('#form_newsletter');
  const newsletterButton = document.querySelector('.newsletter-button');

  // Hide button and show form
  newsletterButton.style.display = 'none';
  form.classList.remove('hide-form');
  form.classList.add('show-form');
}
</script>

{% stylesheet %}
  .hide-form {
    display: none;
  }

  .show-form {
    display: block;
  }

  input:focus{
    outline: none;
    background-color: none;
  }

  .newsletter-wrapper {
    width: 100%
  }

  .error{
    color: red;
  }

  .legal-info{
    display: block;
    width: 50%;
  }

  .caja-input-news {
    display: inline-flex;
    justify-content: flex-start;
    flex-direction: row;
    width: 100%;
    position: relative;
    margin: 10px 0;
  }

  .input-news {
    line-height: 16px;
    display: inline-block;
    width: 85%;
    border: none;
    padding: 0;
    border-bottom: 1px solid #E1E1E1;
  }

  .button-news {
    border: none;
    background: transparent;
    line-height: 16px;
    cursor: pointer;
    width: auto;
    text-decoration: underline;
    position: relative;
    color: #2E1D1C;
    font-weight: 400;
    display: inline-block;
  }

{% endstylesheet %}

{% schema %}
{
  "name": "Newsletter Button",
  "tag": null,
  "settings": [
    {
      "type": "text",
      "id": "label",
      "label": "t:settings.label",
      "default": "t:text_defaults.button_label"
    },
    {
      "type": "checkbox",
      "id": "open_in_new_tab",
      "label": "t:settings.open_new_tab",
      "default": false
    },
    {
      "type": "select",
      "id": "style_class",
      "label": "t:settings.style",
      "options": [
        {
          "value": "button",
          "label": "t:options.primary"
        },
        {
          "value": "button-secondary",
          "label": "t:options.secondary"
        },
      ],
      "default": "button"
    },
    {
      "type": "header",
      "content": "t:content.size"
    },
    {
      "type": "select",
      "id": "width",
      "label": "t:settings.width_desktop",
      "options": [
        {
          "value": "fit-content",
          "label": "t:options.fit_content"
        },
        {
          "value": "custom",
          "label": "t:options.custom"
        }
      ],
      "default": "fit-content"
    },
    {
      "type": "range",
      "id": "custom_width",
      "label": "t:settings.custom_width",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "default": 100,
      "visible_if": "{{ block.settings.width == \"custom\" }}"
    },
    {
      "type": "select",
      "id": "width_mobile",
      "label": "t:settings.width_mobile",
      "options": [
        {
          "value": "fit-content",
          "label": "t:options.fit_content"
        },
        {
          "value": "custom",
          "label": "t:options.custom"
        }
      ],
      "default": "fit-content"
    },
    {
      "type": "range",
      "id": "custom_width_mobile",
      "label": "t:settings.custom_width",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "default": 100,
      "visible_if": "{{ block.settings.width_mobile == \"custom\" }}"
    }
  ],
  "presets": [
    {
      "name": "Newsletter Button",
      "category": "t:categories.basic"
    }
  ]
}
{% endschema %}
